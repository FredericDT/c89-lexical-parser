<punctuator, #>
<identifier, include>
<header_name, <errno.h>>
<punctuator, #>
<identifier, include>
<header_name, <sys/stat.h>>
<punctuator, #>
<identifier, include>
<header_name, <linux/fs.h>>
<punctuator, #>
<identifier, include>
<header_name, <linux/sched.h>>
<punctuator, #>
<identifier, include>
<header_name, <linux/kernel.h>>
<punctuator, #>
<identifier, include>
<header_name, <asm/segment.h>>
<keyword, static>
<keyword, void>
<identifier, cp_stat>
<operator, (>
<keyword, struct>
<identifier, m_inode>
<operator, *>
<identifier, inode>
<operator, ,>
<keyword, struct>
<identifier, stat>
<operator, *>
<identifier, statbuf>
<operator, )>
<punctuator, {>
<keyword, struct>
<identifier, stat>
<identifier, tmp>
<punctuator, ;>
<keyword, int>
<identifier, i>
<punctuator, ;>
<identifier, verify_area>
<operator, (>
<identifier, statbuf>
<operator, ,>
<keyword, sizeof>
<operator, (>
<operator, *>
<identifier, statbuf>
<operator, )>
<operator, )>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_dev>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_dev>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_ino>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_num>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_mode>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_mode>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_nlink>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_nlinks>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_uid>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_uid>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_gid>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_gid>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_rdev>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_zone>
<operator, [>
<integer_constant, 0>
<operator, ]>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_size>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_size>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_atime>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_atime>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_mtime>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_mtime>
<punctuator, ;>
<identifier, tmp>
<operator, .>
<identifier, st_ctime>
<operator, =>
<identifier, inode>
<operator, ->>
<identifier, i_ctime>
<punctuator, ;>
<keyword, for>
<operator, (>
<identifier, i>
<operator, =>
<integer_constant, 0>
<punctuator, ;>
<identifier, i>
<operator, <>
<keyword, sizeof>
<operator, (>
<identifier, tmp>
<operator, )>
<punctuator, ;>
<identifier, i>
<operator, ++>
<operator, )>
<identifier, put_fs_byte>
<operator, (>
<operator, (>
<operator, (>
<keyword, char>
<operator, *>
<operator, )>
<operator, &>
<identifier, tmp>
<operator, )>
<operator, [>
<identifier, i>
<operator, ]>
<operator, ,>
<operator, &>
<operator, (>
<operator, (>
<keyword, char>
<operator, *>
<operator, )>
<identifier, statbuf>
<operator, )>
<operator, [>
<identifier, i>
<operator, ]>
<operator, )>
<punctuator, ;>
<punctuator, }>
<keyword, int>
<identifier, sys_stat>
<operator, (>
<keyword, char>
<operator, *>
<identifier, filename>
<operator, ,>
<keyword, struct>
<identifier, stat>
<operator, *>
<identifier, statbuf>
<operator, )>
<punctuator, {>
<keyword, struct>
<identifier, m_inode>
<operator, *>
<identifier, inode>
<punctuator, ;>
<keyword, if>
<operator, (>
<operator, !>
<operator, (>
<identifier, inode>
<operator, =>
<identifier, namei>
<operator, (>
<identifier, filename>
<operator, )>
<operator, )>
<operator, )>
<keyword, return>
<operator, ->
<identifier, ENOENT>
<punctuator, ;>
<identifier, cp_stat>
<operator, (>
<identifier, inode>
<operator, ,>
<identifier, statbuf>
<operator, )>
<punctuator, ;>
<identifier, iput>
<operator, (>
<identifier, inode>
<operator, )>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<punctuator, }>
<keyword, int>
<identifier, sys_fstat>
<operator, (>
<keyword, unsigned>
<keyword, int>
<identifier, fd>
<operator, ,>
<keyword, struct>
<identifier, stat>
<operator, *>
<identifier, statbuf>
<operator, )>
<punctuator, {>
<keyword, struct>
<identifier, file>
<operator, *>
<identifier, f>
<punctuator, ;>
<keyword, struct>
<identifier, m_inode>
<operator, *>
<identifier, inode>
<punctuator, ;>
<keyword, if>
<operator, (>
<identifier, fd>
<operator, >>
<operator, =>
<identifier, NR_OPEN>
<operator, |>
<operator, |>
<operator, !>
<operator, (>
<identifier, f>
<operator, =>
<identifier, current>
<operator, ->>
<identifier, filp>
<operator, [>
<identifier, fd>
<operator, ]>
<operator, )>
<operator, |>
<operator, |>
<operator, !>
<operator, (>
<identifier, inode>
<operator, =>
<identifier, f>
<operator, ->>
<identifier, f_inode>
<operator, )>
<operator, )>
<keyword, return>
<operator, ->
<identifier, EBADF>
<punctuator, ;>
<identifier, cp_stat>
<operator, (>
<identifier, inode>
<operator, ,>
<identifier, statbuf>
<operator, )>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<punctuator, }>
