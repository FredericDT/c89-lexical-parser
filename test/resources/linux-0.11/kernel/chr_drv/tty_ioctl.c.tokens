<punctuator, #>
<identifier, include>
<header_name, <errno.h>>
<punctuator, #>
<identifier, include>
<header_name, <termios.h>>
<punctuator, #>
<identifier, include>
<header_name, <linux/sched.h>>
<punctuator, #>
<identifier, include>
<header_name, <linux/kernel.h>>
<punctuator, #>
<identifier, include>
<header_name, <linux/tty.h>>
<punctuator, #>
<identifier, include>
<header_name, <asm/io.h>>
<punctuator, #>
<identifier, include>
<header_name, <asm/segment.h>>
<punctuator, #>
<identifier, include>
<header_name, <asm/system.h>>
<keyword, static>
<keyword, unsigned>
<keyword, short>
<identifier, quotient>
<operator, [>
<operator, ]>
<operator, =>
<punctuator, {>
<integer_constant, 0>
<operator, ,>
<integer_constant, 2304>
<operator, ,>
<integer_constant, 1536>
<operator, ,>
<integer_constant, 1047>
<operator, ,>
<integer_constant, 857>
<operator, ,>
<integer_constant, 768>
<operator, ,>
<integer_constant, 576>
<operator, ,>
<integer_constant, 384>
<operator, ,>
<integer_constant, 192>
<operator, ,>
<integer_constant, 96>
<operator, ,>
<integer_constant, 64>
<operator, ,>
<integer_constant, 48>
<operator, ,>
<integer_constant, 24>
<operator, ,>
<integer_constant, 12>
<operator, ,>
<integer_constant, 6>
<operator, ,>
<integer_constant, 3>
<punctuator, }>
<punctuator, ;>
<keyword, static>
<keyword, void>
<identifier, change_speed>
<operator, (>
<keyword, struct>
<identifier, tty_struct>
<operator, *>
<identifier, tty>
<operator, )>
<punctuator, {>
<keyword, unsigned>
<keyword, short>
<identifier, port>
<operator, ,>
<identifier, quot>
<punctuator, ;>
<keyword, if>
<operator, (>
<operator, !>
<operator, (>
<identifier, port>
<operator, =>
<identifier, tty>
<operator, ->>
<identifier, read_q>
<operator, .>
<identifier, data>
<operator, )>
<operator, )>
<keyword, return>
<punctuator, ;>
<identifier, quot>
<operator, =>
<identifier, quotient>
<operator, [>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_cflag>
<operator, &>
<identifier, CBAUD>
<operator, ]>
<punctuator, ;>
<identifier, cli>
<operator, (>
<operator, )>
<punctuator, ;>
<identifier, outb_p>
<operator, (>
<integer_constant, 0x80>
<operator, ,>
<identifier, port>
<operator, +>
<integer_constant, 3>
<operator, )>
<punctuator, ;>
<identifier, outb_p>
<operator, (>
<identifier, quot>
<operator, &>
<integer_constant, 0xff>
<operator, ,>
<identifier, port>
<operator, )>
<punctuator, ;>
<identifier, outb_p>
<operator, (>
<identifier, quot>
<operator, >>>
<integer_constant, 8>
<operator, ,>
<identifier, port>
<operator, +>
<integer_constant, 1>
<operator, )>
<punctuator, ;>
<identifier, outb>
<operator, (>
<integer_constant, 0x03>
<operator, ,>
<identifier, port>
<operator, +>
<integer_constant, 3>
<operator, )>
<punctuator, ;>
<identifier, sti>
<operator, (>
<operator, )>
<punctuator, ;>
<punctuator, }>
<keyword, static>
<keyword, void>
<identifier, flush>
<operator, (>
<keyword, struct>
<identifier, tty_queue>
<operator, *>
<identifier, queue>
<operator, )>
<punctuator, {>
<identifier, cli>
<operator, (>
<operator, )>
<punctuator, ;>
<identifier, queue>
<operator, ->>
<identifier, head>
<operator, =>
<identifier, queue>
<operator, ->>
<identifier, tail>
<punctuator, ;>
<identifier, sti>
<operator, (>
<operator, )>
<punctuator, ;>
<punctuator, }>
<keyword, static>
<keyword, void>
<identifier, wait_until_sent>
<operator, (>
<keyword, struct>
<identifier, tty_struct>
<operator, *>
<identifier, tty>
<operator, )>
<punctuator, {>
<punctuator, }>
<keyword, static>
<keyword, void>
<identifier, send_break>
<operator, (>
<keyword, struct>
<identifier, tty_struct>
<operator, *>
<identifier, tty>
<operator, )>
<punctuator, {>
<punctuator, }>
<keyword, static>
<keyword, int>
<identifier, get_termios>
<operator, (>
<keyword, struct>
<identifier, tty_struct>
<operator, *>
<identifier, tty>
<operator, ,>
<keyword, struct>
<identifier, termios>
<operator, *>
<identifier, termios>
<operator, )>
<punctuator, {>
<keyword, int>
<identifier, i>
<punctuator, ;>
<identifier, verify_area>
<operator, (>
<identifier, termios>
<operator, ,>
<keyword, sizeof>
<operator, (>
<operator, *>
<identifier, termios>
<operator, )>
<operator, )>
<punctuator, ;>
<keyword, for>
<operator, (>
<identifier, i>
<operator, =>
<integer_constant, 0>
<punctuator, ;>
<identifier, i>
<operator, <>
<operator, (>
<keyword, sizeof>
<operator, (>
<operator, *>
<identifier, termios>
<operator, )>
<operator, )>
<punctuator, ;>
<identifier, i>
<operator, ++>
<operator, )>
<identifier, put_fs_byte>
<operator, (>
<operator, (>
<operator, (>
<keyword, char>
<operator, *>
<operator, )>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, )>
<operator, [>
<identifier, i>
<operator, ]>
<operator, ,>
<identifier, i>
<operator, +>
<operator, (>
<keyword, char>
<operator, *>
<operator, )>
<identifier, termios>
<operator, )>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<punctuator, }>
<keyword, static>
<keyword, int>
<identifier, set_termios>
<operator, (>
<keyword, struct>
<identifier, tty_struct>
<operator, *>
<identifier, tty>
<operator, ,>
<keyword, struct>
<identifier, termios>
<operator, *>
<identifier, termios>
<operator, )>
<punctuator, {>
<keyword, int>
<identifier, i>
<punctuator, ;>
<keyword, for>
<operator, (>
<identifier, i>
<operator, =>
<integer_constant, 0>
<punctuator, ;>
<identifier, i>
<operator, <>
<operator, (>
<keyword, sizeof>
<operator, (>
<operator, *>
<identifier, termios>
<operator, )>
<operator, )>
<punctuator, ;>
<identifier, i>
<operator, ++>
<operator, )>
<operator, (>
<operator, (>
<keyword, char>
<operator, *>
<operator, )>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, )>
<operator, [>
<identifier, i>
<operator, ]>
<operator, =>
<identifier, get_fs_byte>
<operator, (>
<identifier, i>
<operator, +>
<operator, (>
<keyword, char>
<operator, *>
<operator, )>
<identifier, termios>
<operator, )>
<punctuator, ;>
<identifier, change_speed>
<operator, (>
<identifier, tty>
<operator, )>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<punctuator, }>
<keyword, static>
<keyword, int>
<identifier, get_termio>
<operator, (>
<keyword, struct>
<identifier, tty_struct>
<operator, *>
<identifier, tty>
<operator, ,>
<keyword, struct>
<identifier, termio>
<operator, *>
<identifier, termio>
<operator, )>
<punctuator, {>
<keyword, int>
<identifier, i>
<punctuator, ;>
<keyword, struct>
<identifier, termio>
<identifier, tmp_termio>
<punctuator, ;>
<identifier, verify_area>
<operator, (>
<identifier, termio>
<operator, ,>
<keyword, sizeof>
<operator, (>
<operator, *>
<identifier, termio>
<operator, )>
<operator, )>
<punctuator, ;>
<identifier, tmp_termio>
<operator, .>
<identifier, c_iflag>
<operator, =>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_iflag>
<punctuator, ;>
<identifier, tmp_termio>
<operator, .>
<identifier, c_oflag>
<operator, =>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_oflag>
<punctuator, ;>
<identifier, tmp_termio>
<operator, .>
<identifier, c_cflag>
<operator, =>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_cflag>
<punctuator, ;>
<identifier, tmp_termio>
<operator, .>
<identifier, c_lflag>
<operator, =>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_lflag>
<punctuator, ;>
<identifier, tmp_termio>
<operator, .>
<identifier, c_line>
<operator, =>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_line>
<punctuator, ;>
<keyword, for>
<operator, (>
<identifier, i>
<operator, =>
<integer_constant, 0>
<punctuator, ;>
<identifier, i>
<operator, <>
<identifier, NCC>
<punctuator, ;>
<identifier, i>
<operator, ++>
<operator, )>
<identifier, tmp_termio>
<operator, .>
<identifier, c_cc>
<operator, [>
<identifier, i>
<operator, ]>
<operator, =>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_cc>
<operator, [>
<identifier, i>
<operator, ]>
<punctuator, ;>
<keyword, for>
<operator, (>
<identifier, i>
<operator, =>
<integer_constant, 0>
<punctuator, ;>
<identifier, i>
<operator, <>
<operator, (>
<keyword, sizeof>
<operator, (>
<operator, *>
<identifier, termio>
<operator, )>
<operator, )>
<punctuator, ;>
<identifier, i>
<operator, ++>
<operator, )>
<identifier, put_fs_byte>
<operator, (>
<operator, (>
<operator, (>
<keyword, char>
<operator, *>
<operator, )>
<operator, &>
<identifier, tmp_termio>
<operator, )>
<operator, [>
<identifier, i>
<operator, ]>
<operator, ,>
<identifier, i>
<operator, +>
<operator, (>
<keyword, char>
<operator, *>
<operator, )>
<identifier, termio>
<operator, )>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<punctuator, }>
<keyword, static>
<keyword, int>
<identifier, set_termio>
<operator, (>
<keyword, struct>
<identifier, tty_struct>
<operator, *>
<identifier, tty>
<operator, ,>
<keyword, struct>
<identifier, termio>
<operator, *>
<identifier, termio>
<operator, )>
<punctuator, {>
<keyword, int>
<identifier, i>
<punctuator, ;>
<keyword, struct>
<identifier, termio>
<identifier, tmp_termio>
<punctuator, ;>
<keyword, for>
<operator, (>
<identifier, i>
<operator, =>
<integer_constant, 0>
<punctuator, ;>
<identifier, i>
<operator, <>
<operator, (>
<keyword, sizeof>
<operator, (>
<operator, *>
<identifier, termio>
<operator, )>
<operator, )>
<punctuator, ;>
<identifier, i>
<operator, ++>
<operator, )>
<operator, (>
<operator, (>
<keyword, char>
<operator, *>
<operator, )>
<operator, &>
<identifier, tmp_termio>
<operator, )>
<operator, [>
<identifier, i>
<operator, ]>
<operator, =>
<identifier, get_fs_byte>
<operator, (>
<identifier, i>
<operator, +>
<operator, (>
<keyword, char>
<operator, *>
<operator, )>
<identifier, termio>
<operator, )>
<punctuator, ;>
<operator, *>
<operator, (>
<keyword, unsigned>
<keyword, short>
<operator, *>
<operator, )>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_iflag>
<operator, =>
<identifier, tmp_termio>
<operator, .>
<identifier, c_iflag>
<punctuator, ;>
<operator, *>
<operator, (>
<keyword, unsigned>
<keyword, short>
<operator, *>
<operator, )>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_oflag>
<operator, =>
<identifier, tmp_termio>
<operator, .>
<identifier, c_oflag>
<punctuator, ;>
<operator, *>
<operator, (>
<keyword, unsigned>
<keyword, short>
<operator, *>
<operator, )>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_cflag>
<operator, =>
<identifier, tmp_termio>
<operator, .>
<identifier, c_cflag>
<punctuator, ;>
<operator, *>
<operator, (>
<keyword, unsigned>
<keyword, short>
<operator, *>
<operator, )>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_lflag>
<operator, =>
<identifier, tmp_termio>
<operator, .>
<identifier, c_lflag>
<punctuator, ;>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_line>
<operator, =>
<identifier, tmp_termio>
<operator, .>
<identifier, c_line>
<punctuator, ;>
<keyword, for>
<operator, (>
<identifier, i>
<operator, =>
<integer_constant, 0>
<punctuator, ;>
<identifier, i>
<operator, <>
<identifier, NCC>
<punctuator, ;>
<identifier, i>
<operator, ++>
<operator, )>
<identifier, tty>
<operator, ->>
<identifier, termios>
<operator, .>
<identifier, c_cc>
<operator, [>
<identifier, i>
<operator, ]>
<operator, =>
<identifier, tmp_termio>
<operator, .>
<identifier, c_cc>
<operator, [>
<identifier, i>
<operator, ]>
<punctuator, ;>
<identifier, change_speed>
<operator, (>
<identifier, tty>
<operator, )>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<punctuator, }>
<keyword, int>
<identifier, tty_ioctl>
<operator, (>
<keyword, int>
<identifier, dev>
<operator, ,>
<keyword, int>
<identifier, cmd>
<operator, ,>
<keyword, int>
<identifier, arg>
<operator, )>
<punctuator, {>
<keyword, struct>
<identifier, tty_struct>
<operator, *>
<identifier, tty>
<punctuator, ;>
<keyword, if>
<operator, (>
<identifier, MAJOR>
<operator, (>
<identifier, dev>
<operator, )>
<operator, ==>
<integer_constant, 5>
<operator, )>
<punctuator, {>
<identifier, dev>
<operator, =>
<identifier, current>
<operator, ->>
<identifier, tty>
<punctuator, ;>
<keyword, if>
<operator, (>
<identifier, dev>
<operator, <>
<integer_constant, 0>
<operator, )>
<identifier, panic>
<operator, (>
<string_literal, "tty_ioctl: dev<0">
<operator, )>
<punctuator, ;>
<punctuator, }>
<keyword, else>
<identifier, dev>
<operator, =>
<identifier, MINOR>
<operator, (>
<identifier, dev>
<operator, )>
<punctuator, ;>
<identifier, tty>
<operator, =>
<identifier, dev>
<operator, +>
<identifier, tty_table>
<punctuator, ;>
<keyword, switch>
<operator, (>
<identifier, cmd>
<operator, )>
<punctuator, {>
<keyword, case>
<identifier, TCGETS>
<operator, :>
<keyword, return>
<identifier, get_termios>
<operator, (>
<identifier, tty>
<operator, ,>
<operator, (>
<keyword, struct>
<identifier, termios>
<operator, *>
<operator, )>
<identifier, arg>
<operator, )>
<punctuator, ;>
<keyword, case>
<identifier, TCSETSF>
<operator, :>
<identifier, flush>
<operator, (>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, read_q>
<operator, )>
<punctuator, ;>
<keyword, case>
<identifier, TCSETS>
<operator, :>
<keyword, return>
<identifier, set_termios>
<operator, (>
<identifier, tty>
<operator, ,>
<operator, (>
<keyword, struct>
<identifier, termios>
<operator, *>
<operator, )>
<identifier, arg>
<operator, )>
<punctuator, ;>
<keyword, case>
<identifier, TCGETA>
<operator, :>
<keyword, return>
<identifier, get_termio>
<operator, (>
<identifier, tty>
<operator, ,>
<operator, (>
<keyword, struct>
<identifier, termio>
<operator, *>
<operator, )>
<identifier, arg>
<operator, )>
<punctuator, ;>
<keyword, case>
<identifier, TCSETAF>
<operator, :>
<identifier, flush>
<operator, (>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, read_q>
<operator, )>
<punctuator, ;>
<keyword, case>
<identifier, TCSETAW>
<operator, :>
<identifier, wait_until_sent>
<operator, (>
<identifier, tty>
<operator, )>
<punctuator, ;>
<keyword, case>
<identifier, TCSETA>
<operator, :>
<keyword, return>
<identifier, set_termio>
<operator, (>
<identifier, tty>
<operator, ,>
<operator, (>
<keyword, struct>
<identifier, termio>
<operator, *>
<operator, )>
<identifier, arg>
<operator, )>
<punctuator, ;>
<keyword, case>
<identifier, TCSBRK>
<operator, :>
<keyword, if>
<operator, (>
<operator, !>
<identifier, arg>
<operator, )>
<punctuator, {>
<identifier, wait_until_sent>
<operator, (>
<identifier, tty>
<operator, )>
<punctuator, ;>
<identifier, send_break>
<operator, (>
<identifier, tty>
<operator, )>
<punctuator, ;>
<punctuator, }>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<keyword, case>
<identifier, TCXONC>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TCFLSH>
<operator, :>
<keyword, if>
<operator, (>
<identifier, arg>
<operator, ==>
<integer_constant, 0>
<operator, )>
<identifier, flush>
<operator, (>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, read_q>
<operator, )>
<punctuator, ;>
<keyword, else>
<keyword, if>
<operator, (>
<identifier, arg>
<operator, ==>
<integer_constant, 1>
<operator, )>
<identifier, flush>
<operator, (>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, write_q>
<operator, )>
<punctuator, ;>
<keyword, else>
<keyword, if>
<operator, (>
<identifier, arg>
<operator, ==>
<integer_constant, 2>
<operator, )>
<punctuator, {>
<identifier, flush>
<operator, (>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, read_q>
<operator, )>
<punctuator, ;>
<identifier, flush>
<operator, (>
<operator, &>
<identifier, tty>
<operator, ->>
<identifier, write_q>
<operator, )>
<punctuator, ;>
<punctuator, }>
<keyword, else>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<keyword, case>
<identifier, TIOCEXCL>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCNXCL>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCSCTTY>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCGPGRP>
<operator, :>
<identifier, verify_area>
<operator, (>
<operator, (>
<keyword, void>
<operator, *>
<operator, )>
<identifier, arg>
<operator, ,>
<integer_constant, 4>
<operator, )>
<punctuator, ;>
<identifier, put_fs_long>
<operator, (>
<identifier, tty>
<operator, ->>
<identifier, pgrp>
<operator, ,>
<operator, (>
<keyword, unsigned>
<keyword, long>
<operator, *>
<operator, )>
<identifier, arg>
<operator, )>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<keyword, case>
<identifier, TIOCSPGRP>
<operator, :>
<identifier, tty>
<operator, ->>
<identifier, pgrp>
<operator, =>
<identifier, get_fs_long>
<operator, (>
<operator, (>
<keyword, unsigned>
<keyword, long>
<operator, *>
<operator, )>
<identifier, arg>
<operator, )>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<keyword, case>
<identifier, TIOCOUTQ>
<operator, :>
<identifier, verify_area>
<operator, (>
<operator, (>
<keyword, void>
<operator, *>
<operator, )>
<identifier, arg>
<operator, ,>
<integer_constant, 4>
<operator, )>
<punctuator, ;>
<identifier, put_fs_long>
<operator, (>
<identifier, CHARS>
<operator, (>
<identifier, tty>
<operator, ->>
<identifier, write_q>
<operator, )>
<operator, ,>
<operator, (>
<keyword, unsigned>
<keyword, long>
<operator, *>
<operator, )>
<identifier, arg>
<operator, )>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<keyword, case>
<identifier, TIOCINQ>
<operator, :>
<identifier, verify_area>
<operator, (>
<operator, (>
<keyword, void>
<operator, *>
<operator, )>
<identifier, arg>
<operator, ,>
<integer_constant, 4>
<operator, )>
<punctuator, ;>
<identifier, put_fs_long>
<operator, (>
<identifier, CHARS>
<operator, (>
<identifier, tty>
<operator, ->>
<identifier, secondary>
<operator, )>
<operator, ,>
<operator, (>
<keyword, unsigned>
<keyword, long>
<operator, *>
<operator, )>
<identifier, arg>
<operator, )>
<punctuator, ;>
<keyword, return>
<integer_constant, 0>
<punctuator, ;>
<keyword, case>
<identifier, TIOCSTI>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCGWINSZ>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCSWINSZ>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCMGET>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCMBIS>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCMBIC>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCMSET>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCGSOFTCAR>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, case>
<identifier, TIOCSSOFTCAR>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<keyword, default>
<operator, :>
<keyword, return>
<operator, ->
<identifier, EINVAL>
<punctuator, ;>
<punctuator, }>
<punctuator, }>
